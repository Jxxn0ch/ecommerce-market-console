## 이커머스 마켓을 콘솔로 구현



### 개발환경

-----

- Mac OS
- Intellij IDEA
- Java 11
- Spring Boot 2.3.3
- JPA

### 프로젝트 구조

-----

1. main/java
   1. config : 프로젝트 내 추가적으로 설정이 필요한 부분들을 다루고 있습니다. 이번 문제에서 Multi Thread로 `SoldOutException` 요구사항이 있어, 비동기로 주문을 요청하는 과정에 필요한 설정을 담았습니다.
   2. domain : 프로젝트에서 다루고자 하는 대상의 값과 로직들을 통틀어서 처리하고자 담았습니다.
   3. entity : 실제 DB 테이블과 매칭될 클래스입니다
   4. exception : 커스텀하여 생성한 Exception입니다
   5. repository : in memory 방식으로 사용 중인 h2의 JpaRepository 입니다
   6. runner : SpringApplication run이후 실행될 내용들을 `CommandLineRunner`를 활용하여 처리하였습니다
   7. service : 실제 주문 시 활용될 내용들을 담고 있습니다.
   8. view : 콘솔에 출력될 내용들을 담고 있습니다.
2. main/test
   1. 각 패키지별 테스트 코드들을 담고 있습니다.

### 구현 방향

-----

1. 먼저 요구사항을 분석하여 대략적인 설계를 진행하였습니다.
2. UI, DB 등과 의존 관계를 가지지 않는 도메인 영역을 집중 설계하였습니다.
3. 만들어진 도메인 설계를 기준으로 TDD를 진행하였고, 모든 코드들에 TDD를 적용하기 힘들어 선작업 후 리팩토링 후 테스트 코드를 작성한 내용도 있습니다.
4. 한 메소드는 하나의 역할만 가지고 로직을 진행하게끔 처리하였습니다.
5. 메소드, 클래스, 변수 등 의미 있는 이름을 지으려고 노력했지만 빠른 시간 내에 리뷰하실 것으로 예상되어 임의로 몇곳은 주석을 작성하였습니다.

### 실행

-----

1. MarketApplication 실행
   1. 콘솔에서 `o` 입력 시
      1. 상품 코드 입력 시
         1. DB내 코드 조회 후, 유효한 상품일 경우 수량 입력 후 카트에 적재
      2. `Space` 입력 시
         1. 카트에 상품이 담겨있지 않을 경우 이전 단계로 회귀
         2. 상품이 담겨있다면 주문 진행 후 재고 차감
         3. 상품의 재고가 없을 경우 `SoldOutException` 발생
   2. 콘솔에서 `q` 입력시
      1. `SpringApplication` 종료